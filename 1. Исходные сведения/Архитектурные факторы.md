
Требования к системе формулируются для Медицинской Системы Записи с учетом доменной специфики (ПДн, медицинская тайна), сценариев для пациентов, врачей и административного персонала, а также требований к безопасности, доступности и масштабируемости.

## Функциональные требования

- **F01 Регистрация и авторизация пользователей**: поддержка ролей Пациент, Врач, Административный персонал, Системный администратор; SSO/2FA по возможности.
- **F02 Запись на прием к врачу**: поиск врача по специализации, выбор даты/времени, подтверждение записи, управление отменами/переносами, лист ожидания.
- **F03 Управление расписанием врачей**: создание шаблонов смен, управление слотами, исключениями и отпусками; редактирование врачом и админ-персоналом.
- **F04 Ведение медицинской истории пациента**: хранение эпизодов обращения, диагнозов, назначений, результатов процедур и прикрепленных файлов.
- **F05 Ввод и редактирование данных приема**: врач заносит жалобы, анамнез, осмотр, диагноз(ы), назначения, проведенные процедуры.
- **F06 Просмотр истории пациентом**: доступ к собственной медицинской карте, результатам процедур, назначениям, выпискам.
- **F07 Отзывы и обратная связь**: пациент оставляет отзыв по приему/врачу; модерация и аналитика отзывов.
- **F08 Уведомления**: напоминания о предстоящем приеме, изменениях расписания, готовности результатов; каналы: email, SMS, push.
- **F09 Аналитика**: отчеты по загрузке врачей, пропускам, отменам, удовлетворенности пациентов, SLA уведомлений.
- **F10 Резервное копирование и восстановление**: плановые бэкапы, тест восстановления, регламент RPO/RTO.
- **F11 Интеграции**: обмен с внешними мед. системами (МИС/ЛИС/ЕРИС), импорт/экспорт результатов, справочники (ОКСМ, МКБ-10), календарные праздники.

## Нефункциональные требования

### Производительность (Performance)

- **PER01**: 95-й перцентиль времени создания записи < 1.5 с, 99-й < 3 с.
- **PER02**: Отображение расписания врача на неделю < 1 с (95-й п.).
- **PER03**: Поиск врача по фильтрам (< 50 тыс. записей) < 2 с (95-й п.).
- **PER04**: Генерация выписки/отчета (PDF/CSV) < 5 с в фоне с уведомлением по готовности.

### Масштабируемость (Scalability)

- **SCA01**: Горизонтальное масштабирование веб/API и брокера уведомлений без даунтайма.
- **SCA02**: Поддержка 5 000 одновременных активных пользователей на запуске; рост до 20 000 в течение 2 лет.
- **SCA03**: Планируемый объем карточек пациентов — миллионы записей; шардирование/архивирование по регламенту хранения.

### Доступность (Availability)

- **AVA01**: Доступность сервиса не ниже 99.9% в месяц; критические уведомления — 99.95%.
- **AVA02**: Плановое окно обслуживания: 02:00–04:00 локального времени (по необходимости, с уведомлением пользователей).

### Безопасность и аудит (Security)

- **SEC01**: Соответствие 152-ФЗ и подзаконным актам; локальные политики ИБ организации.
- **SEC02**: Хранение ПДн и мед. тайны с шифрованием «на диске» (AES-256) и «в канале» (TLS 1.2+).
- **SEC03**: RBAC на уровне ролей и объектов (карта пациента, запись, документ); журналирование действий (создание/просмотр/изменение/экспорт).
- **SEC04**: Двухфакторная аутентификация для врачей/админов; защита от brute-force, CSRF, XSS, SQLi.
- **SEC05**: Управление ключами/секретами, регулярные сканы уязвимостей, обновления зависимостей.

### Надежность (Durability, Disaster Recovery)

- **DUR01**: RPO ≤ 15 минут, RTO ≤ 1 час; ежедневные полные бэкапы + инкрементальные.
- **DUR02**: Репликация БД; автоматическое переключение при сбое; периодические учения DR.

### Мониторинг (Monitoring)

- **MON01**: Технические метрики (APM, ошибки, латентность, очереди, доставка уведомлений) и бизнес-метрики (успешные записи, no-show, конверсия напоминаний).
- **MON02**: Алёртинг с приоритетами, дашборды SRE/операций.

### Организационные и юридические вопросы (Legal, Regulatory and Compliance)

- **LRC01**: Обработка и хранение ПДн на территории, соответствующей требованиям регулятора; регламент доступа/удаления.
- **LRC02**: Согласия пациентов на обработку ПДн и уведомления; ведение логов согласий.

### Локализация и интернационализация (I18n, L10n)

- **L10N01**: Русский по умолчанию; поддержка мультиязычного интерфейса (например, RU/EN/…).
- **L10N02**: Локализация форматов дат/времени, часовых поясов и медицинских справочников.

### Целевые платформа и устройства пользователей

- **PLT01**: Веб (современные версии Chrome, Edge, Safari, Firefox), мобильные устройства iOS/Android.
- **PLT02**: Адаптивный интерфейс, поддержка push-уведомлений.

## Ограничения

- **LIM01**: Работа с персональными данными и мед. тайной требует строгих политик безопасности и согласий.
- **LIM02**: Интеграции зависят от доступности внешних МИС/ЛИС и форматов (HL7/FHIR при наличии, отечественные стандарты).
- **LIM03**: Соответствие внутренним регламентам ИБ может ограничивать доступ к интернету из контура.

## Принципы

- **PRN01 Privacy by Design**: приватность и минимизация данных по умолчанию.
- **PRN02 Security by Default**: безопасные настройки из коробки, регулярные обновления.
- **PRN03 Observability**: измеримость, трассировка, прозрачные SLO.
- **PRN04 UX для медицины**: скорость ввода данных врачом, доступность для пациента, ясные статусы записей и уведомлений.
- **PRN05 Эволюционность**: пошаговое масштабирование и модульность для новых интеграций и нагрузок.
