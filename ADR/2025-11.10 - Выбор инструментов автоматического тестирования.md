**ADR 2025-11.6 — Выбор инструментов автоматического тестирования**

**Дата:** 8 ноября 2025 г.

**Статус:** Принято

**Контекст:**  
Требуется унифицированная стратегия автоматического тестирования для стеков проекта (.NET, React, React Native) с интеграцией в CI/CD и воспроизводимой тестовой инфраструктурой.

**Рассмотренные варианты:**  
- Unit / модульные тесты  
- Компонентные / UI тесты  
- Интеграционные тесты (с зависимостями)  
- Contract testing (consumer‑driven)  
- E2E (web и mobile)  
- Нагрузочное тестирование  
- Security scans / dependency scanning

**Решение:**  
Стандартный набор инструментов для проекта:  
- Backend unit: **xUnit + FluentAssertions + Moq**  
- Frontend unit/component: **Jest + React Testing Library + Storybook**  
- Integration: **Testcontainers for .NET / WebApplicationFactory**; MSW / docker‑compose для фронта  
- Contract: **Pact (consumer‑driven contracts)**  
- E2E web: **Playwright**  
- E2E mobile (React Native): **Detox**  
- Load: **k6**  
- Security: **OWASP ZAP** + dependency scanners (Dependabot / Snyk)  
- Coverage/quality: **coverlet/reportgenerator**, **istanbul/nyc**, **SonarQube**

**Обоснование:**  
Выбранные инструменты зрелы, поддерживают наши стеки, легко интегрируются в CI и обеспечивают баланс покрытие/скорость прогонов. Pact и Testcontainers уменьшают риск интеграционных регрессий; Playwright/Detox дают стабильные E2E‑прогоны; k6 и ZAP покрывают load/security‑требования.

**Недостатки решения:**  
- Инвестиция в CI/SRE поддержку и инфраструктуру (ephemeral env, артефакты).  
- Потребность в обучении команд и поддержке шаблонов/стандартов.  
- Возможное увеличение времени полных релизных pipeline — требует оптимизации (параллелизм, smoke‑наборы).

**Последствия:**  
- Усложнение процесса разработки из-за необходимости поддержки множества видов тестов.
- Увеличение времени сборки и тестирования проекта.
- Возможны проблемы с поддержкой тестовой инфраструктуры при масштабировании.
- Повышение требований к квалификации разработчиков в области тестирования.

