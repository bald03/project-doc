**Дата:** 8 ноября 2025 г.

**Статус:** Принято

**Контекст:**  
Нужно определить политику хранения объектов в Yandex Object Storage (S3‑совместимо) с обязательным хранением данных в РФ и тремя доступными storage‑классами: standard, cold, ice.

**Рассмотренные варианты:**  
- Хранение в классе **standard** (частый доступ).  
- Хранение в классе **cold** (редкий доступ).  
- Хранение в классе **ice** (очень редкий доступ, архив).

**Решение:**  
Принять комбинированную политику на уровне префиксов/бакетов: назначать для каждой категории данных один из классов (standard / cold / ice) и применять staged lifecycle для записей (standard → cold → ice) по определенным срокам.

**Обоснование:**  
- Три класса покрывают требования по доступности и стоимости.  
- Staged lifecycle даёт баланс: быстрый доступ на начальном этапе и дешёвое долгосрочное хранение в архиве.  
- Управление на уровне префиксов упрощает IAM, шифрование и мониторинг.

**Недостатки решения:**  
- Переходы в cold/ice увеличивают latency и стоимость восстановления при редком доступе.  
- Требуется точная настройка lifecycle и мониторинг, чтобы соблюсти SLA.  
- Immutable retention (WORM) требует отдельной проверки поддержки провайдером; при отсутствии — компенсирующие процессы.

**Последствия:**  
- Повышенные затраты на хранение из-за версионирования и репликации данных.
- Возможны задержки при доступе к данным в cold и ice хранилищах.
- Зависимость от выбранных политик хранения и сложность их изменения.
- Усложнение процессов восстановления данных из архивных копий.
