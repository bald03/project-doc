**ADR 2025-11.4 — Выбор системы хранения файлов**

**Дата:** 8 ноября 2025 г.

**Статус:** Принято

**Контекст:**  
Требуется облачное объектное хранилище для файлов проекта (медицинские документы, изображения, вложения) с обязательным хранением данных на территории РФ, высокой доступностью, версионированием и контролем доступа.

**Рассмотренные варианты:**  
1. **VK Cloud S3** — S3‑совместимое хранилище с дата‑центрами в РФ.  
2. **Selectel Storage** — объектное хранилище в российских ЦОД.  
3. **Yandex Object Storage** — S3‑совместимое хранилище Яндекс.Облака в РФ.

**Решение:**  
Выбран **Yandex Object Storage**.

**Обоснование:**  
- Локализация данных в дата‑центрах на территории РФ (соответствие регуляторным требованиям).  
- S3‑совместимый API — совместимость с существующими инструментами и SDK.  
- Поддержка версионирования объектов, lifecycle‑политик и уведомлений.  
- Интеграция с KMS и серверным шифрованием для защиты данных.  
- Возможность использования CDN и тесная интеграция с экосистемой Яндекс.Облака.

**Недостатки решения:**  
- Привязка к инфраструктуре Яндекс.Облака (vendor lock‑in).  
- Меньше глобальных точек присутствия по сравнению с крупными международными провайдерами.  
- Ограниченный набор дополнительных облачных сервисов по сравнению с AWS/Azure.

**Последствия:**  
- Внедрить структуру бакетов и правила именования.  
- Разработать и утвердить политику хранения (lifecycle, retention, versioning).  
- Настроить IAM‑роли, bucket policies и шифрование (KMS).  
- Настроить мониторинг использования и затрат, резервное копирование критичных данных.  
- Обновить операции SRE/DevOps‑процедуры для работы с выбранным хранилищем.
